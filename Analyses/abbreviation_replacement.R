library(tidytext)
library(SemNetCleaner)
library(tm)
library(english)
library(xfun)
library(tidyr)
library(dplyr)
library(stringdist)
library(tidyverse)
library(stringr)

###############################################################################
## ++++++++++++++++++++++++ Upload Indicators ++++++++++++++++++++++++++++++###
###############################################################################

df.indicators = read.csv("D:/Projects/Project_Indicators/Data/Spreadsheets/Indicators/Indicators_processed_v4.csv")
df.indicators$Indicator = gsub("\\s*\\([^\\)]+\\)","",as.character(df.indicators$Indicator))

## Set up Indicators list
abbreviations.full = c("HDI", "E.P.I.", "IWRM", "WRM", "BOD5", "AV", "GDP", "GRDP", "ODA", "GVA", "ARA", 
                  "Q355", "Q90", "R&D", "Sci", "Eng", "ET",  "WRV")
desired_words.full <- c("Human Development Index", "Environmental Performance Index", 
                   "Integrated Water Resources Management", "Water Resources Management", 
                   "Biochemical Oxygen Demand", "", "Gross Domestic Product", "Gross Regional Domestic Product",
                   "Official Development Assistance", "Gross Value Added", "Active Riparian Area", 
                   "Largest Streamflow", "Smallest Streamflow", "Research and development", "Science", "Engineering",
                   "evapotranspiration", "Water Resources Variability")

desired_words.full = gsub(" ", "", desired_words.full, fixed = TRUE)


## replace abbreviations
abbreviations = c("HDI")
desired_words <- c("HumanDevelopmentIndex")
df.indicators$Indicator = gsub(paste0("\\b(", paste0(abbreviations, collapse="|"), ")[s]?\\b"), desired_words, df.indicators$Indicator, 
                               ignore.case = TRUE)

abbreviations = c("E.P.I.")
desired_words <- c("EnvironmentalPerformanceIndex")
df.indicators$Indicator = gsub(paste0("\\b(", paste0(abbreviations, collapse="|"), ")[s]?\\b"), desired_words, df.indicators$Indicator, 
                               ignore.case = TRUE)

abbreviations = c("IWRM")
desired_words <- c("IntegratedWaterResourcesManagement")
df.indicators$Indicator = gsub(paste0("\\b(", paste0(abbreviations, collapse="|"), ")[s]?\\b"), desired_words, df.indicators$Indicator, 
                               ignore.case = TRUE)

abbreviations = c("WRM")
desired_words <- c("WaterResourcesManagement")
df.indicators$Indicator = gsub(paste0("\\b(", paste0(abbreviations, collapse="|"), ")[s]?\\b"), desired_words, df.indicators$Indicator, 
                               ignore.case = TRUE)

abbreviations = c("resource")
desired_words <- c("resources")
df.indicators$Indicator = gsub(paste0("\\b(", paste0(abbreviations, collapse="|"), ")[s]?\\b"), desired_words, df.indicators$Indicator, 
                               ignore.case = TRUE)

abbreviations = c("availing")
desired_words <- c("availability")
df.indicators$Indicator = gsub(paste0("\\b(", paste0(abbreviations, collapse="|"), ")[s]?\\b"), desired_words, df.indicators$Indicator, 
                               ignore.case = TRUE)

abbreviations = abbreviations.full[5]
desired_words <- desired_words.full[5]
df.indicators$Indicator = gsub(paste0("\\b(", paste0(abbreviations, collapse="|"), ")[s]?\\b"), desired_words, df.indicators$Indicator, 
                               ignore.case = TRUE)

abbreviations = abbreviations.full[6]
desired_words <- desired_words.full[6]
df.indicators$Indicator = gsub(paste0("\\b(", paste0(abbreviations, collapse="|"), ")[s]?\\b"), desired_words, df.indicators$Indicator, 
                               ignore.case = TRUE)

abbreviations = abbreviations.full[7]
desired_words <- desired_words.full[7]
df.indicators$Indicator = gsub(paste0("\\b(", paste0(abbreviations, collapse="|"), ")[s]?\\b"), desired_words, df.indicators$Indicator, 
                               ignore.case = TRUE)

abbreviations = abbreviations.full[8]
desired_words <- desired_words.full[8]
df.indicators$Indicator = gsub(paste0("\\b(", paste0(abbreviations, collapse="|"), ")[s]?\\b"), desired_words, df.indicators$Indicator, 
                               ignore.case = TRUE)

abbreviations = abbreviations.full[9]
desired_words <- desired_words.full[9]
df.indicators$Indicator = gsub(paste0("\\b(", paste0(abbreviations, collapse="|"), ")[s]?\\b"), desired_words, df.indicators$Indicator, 
                               ignore.case = TRUE)

abbreviations = abbreviations.full[10]
desired_words <- desired_words.full[10]
df.indicators$Indicator = gsub(paste0("\\b(", paste0(abbreviations, collapse="|"), ")[s]?\\b"), desired_words, df.indicators$Indicator, 
                               ignore.case = TRUE)

abbreviations = abbreviations.full[11]
desired_words <- desired_words.full[11]
df.indicators$Indicator = gsub(paste0("\\b(", paste0(abbreviations, collapse="|"), ")[s]?\\b"), desired_words, df.indicators$Indicator, 
                               ignore.case = TRUE)

abbreviations = abbreviations.full[12]
desired_words <- desired_words.full[12]
df.indicators$Indicator = gsub(paste0("\\b(", paste0(abbreviations, collapse="|"), ")[s]?\\b"), desired_words, df.indicators$Indicator, 
                               ignore.case = TRUE)

abbreviations = abbreviations.full[13]
desired_words <- desired_words.full[13]
df.indicators$Indicator = gsub(paste0("\\b(", paste0(abbreviations, collapse="|"), ")[s]?\\b"), desired_words, df.indicators$Indicator, 
                               ignore.case = TRUE)

abbreviations = abbreviations.full[14]
desired_words <- desired_words.full[14]
df.indicators$Indicator = gsub(paste0("\\b(", paste0(abbreviations, collapse="|"), ")[s]?\\b"), desired_words, df.indicators$Indicator, 
                               ignore.case = TRUE)

abbreviations = abbreviations.full[15]
desired_words <- desired_words.full[15]
df.indicators$Indicator = gsub(paste0("\\b(", paste0(abbreviations, collapse="|"), ")[s]?\\b"), desired_words, df.indicators$Indicator, 
                               ignore.case = TRUE)

abbreviations = abbreviations.full[16]
desired_words <- desired_words.full[16]
df.indicators$Indicator = gsub(paste0("\\b(", paste0(abbreviations, collapse="|"), ")[s]?\\b"), desired_words, df.indicators$Indicator, 
                               ignore.case = TRUE)

abbreviations = abbreviations.full[17]
desired_words <- desired_words.full[17]
df.indicators$Indicator = gsub(paste0("\\b(", paste0(abbreviations, collapse="|"), ")[s]?\\b"), desired_words, df.indicators$Indicator, 
                               ignore.case = TRUE)

abbreviations = abbreviations.full[18]
desired_words <- desired_words.full[18]
df.indicators$Indicator = gsub(paste0("\\b(", paste0(abbreviations, collapse="|"), ")[s]?\\b"), desired_words, df.indicators$Indicator, 
                               ignore.case = TRUE)

abbreviations = abbreviations.full[19]
desired_words <- desired_words.full[19]
df.indicators$Indicator = gsub(paste0("\\b(", paste0(abbreviations, collapse="|"), ")[s]?\\b"), desired_words, df.indicators$Indicator, 
                               ignore.case = TRUE)

abbreviations = abbreviations.full[20]
desired_words <- desired_words.full[20]
df.indicators$Indicator = gsub(paste0("\\b(", paste0(abbreviations, collapse="|"), ")[s]?\\b"), desired_words, df.indicators$Indicator, 
                               ignore.case = TRUE)

abbreviations = c("rainfall")
desired_words <- c("precipitation")
df.indicators$Indicator = gsub(paste0("\\b(", paste0(abbreviations, collapse="|"), ")[s]?\\b"), desired_words, df.indicators$Indicator, 
                               ignore.case = TRUE)

abbreviations = c("runoff")
desired_words <- c("streamflow")
df.indicators$Indicator = gsub(paste0("\\b(", paste0(abbreviations, collapse="|"), ")[s]?\\b"), desired_words, df.indicators$Indicator, 
                               ignore.case = TRUE)

abbreviations = c("discharge")
desired_words <- c("streamflow")
df.indicators$Indicator = gsub(paste0("\\b(", paste0(abbreviations, collapse="|"), ")[s]?\\b"), desired_words, df.indicators$Indicator, 
                               ignore.case = TRUE)

abbreviations = c("treated")
desired_words <- c("treatment")
df.indicators$Indicator = gsub(paste0("\\b(", paste0(abbreviations, collapse="|"), ")[s]?\\b"), desired_words, df.indicators$Indicator, 
                               ignore.case = TRUE)

abbreviations = c("river")
desired_words <- c("stream")
df.indicators$Indicator = gsub(paste0("\\b(", paste0(abbreviations, collapse="|"), ")[s]?\\b"), desired_words, df.indicators$Indicator, 
                               ignore.case = TRUE)

abbreviations = c("aquifer")
desired_words <- c("groundwater aquifer")
df.indicators$Indicator = gsub(paste0("\\b(", paste0(abbreviations, collapse="|"), ")[s]?\\b"), desired_words, df.indicators$Indicator, 
                               ignore.case = TRUE)

abbreviations = c("load")
desired_words <- c("concentration")
df.indicators$Indicator = gsub(paste0("\\b(", paste0(abbreviations, collapse="|"), ")[s]?\\b"), desired_words, df.indicators$Indicator, 
                               ignore.case = TRUE)

abbreviations = c("run-off")
desired_words <- c("streamflow")
df.indicators$Indicator = gsub(paste0("\\b(", paste0(abbreviations, collapse="|"), ")[s]?\\b"), desired_words, df.indicators$Indicator, 
                               ignore.case = TRUE)

abbreviations = c("rainy")
desired_words <- c("precipitation")
df.indicators$Indicator = gsub(paste0("\\b(", paste0(abbreviations, collapse="|"), ")[s]?\\b"), desired_words, df.indicators$Indicator, 
                               ignore.case = TRUE)
abbreviations = c("temperatures")
desired_words <- c("temperature")
df.indicators$Indicator = gsub(paste0("\\b(", paste0(abbreviations, collapse="|"), ")[s]?\\b"), desired_words, df.indicators$Indicator, 
                               ignore.case = TRUE)

abbreviations = c("dam")
desired_words <- c("reservoir")
df.indicators$Indicator = gsub(paste0("\\b(", paste0(abbreviations, collapse="|"), ")[s]?\\b"), desired_words, df.indicators$Indicator, 
                               ignore.case = TRUE)



write.csv(df.indicators, "D:/Projects/Project_Indicators/Data/Spreadsheets/Indicators/Indicators_Processed_v5.csv")
